{
    "run_sh_template": "#!/bin/bash\ncd /root\n\nmkdir -p $OUTPUT\nnohup bash build.sh > $OUTPUT/build.log 2>&1",
    "run_py_template": "#!/usr/bin/env python3\nimport subprocess\nimport os\nimport sys\nfrom pathlib import Path\n\nos.mkdir(os.environ.get('OUTPUT'), exist_ok=True)\n# 切换到 /root 目录\nos.chdir('/root')\n\n# 获取 OUTPUT 环境变量\noutput_dir = os.environ.get('OUTPUT', '/root/output')\nlog_file = os.path.join(output_dir, 'build.log')\n\n# 确保日志目录存在\nPath(output_dir).mkdir(parents=True, exist_ok=True)\n\n# 执行 build.sh，将输出重定向到日志文件\nprint(f'Starting build.sh, logs will be saved to {log_file}...')\ntry:\n    with open(log_file, 'w', encoding='utf-8') as log:\n        log.write(f'=== Starting build.sh ===\\n')\n        log.flush()\n        \n        result = subprocess.run(\n            ['bash', 'build.sh'],\n            cwd='/root',\n            stdout=log,\n            stderr=subprocess.STDOUT,\n            check=True\n        )\n        \n        log.write(f'\\n=== build.sh completed successfully ===\\n')\n        log.flush()\n    \n    print(f'build.sh completed successfully, logs saved to {log_file}')\n    sys.exit(0)\nexcept subprocess.CalledProcessError as e:\n    error_msg = f'build.sh failed with error code {e.returncode}'\n    print(error_msg)\n    with open(log_file, 'a', encoding='utf-8') as log:\n        log.write(f'\\n=== ERROR: {error_msg} ===\\n')\n    sys.exit(1)\nexcept Exception as e:\n    error_msg = f'Error running build.sh: {e}'\n    print(error_msg)\n    with open(log_file, 'a', encoding='utf-8') as log:\n        log.write(f'\\n=== ERROR: {error_msg} ===\\n')\n    sys.exit(1)"
}

